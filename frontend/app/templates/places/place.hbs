{{#if isPayer}}
  {{link-to 'Edit' 'places.place.edit' place class="btn btn-default pull-right"}}
  <button {{action "toggleModal"}} class='btn btn-primary'>Add Billl</button>
  <br>
{{/if}}
<button type="button" class="btn btn-warning pull-right" {{action 'leave'}}>Leave</button>
<button type="button" class="btn btn-success text-center" {{action 'generateRent'}}>Generate Rent</button>

<br>
<br><br>
<h1 class="text-center"><b>{{place.name}}</b></h1>
<div class="text-center">{{place.address}}</div>

<div class="text-center">
  <i class="fa fa-arrow-left fa-2x arrow" {{action 'previousMonth'}}></i>
  <div class="month">{{redabableMonth}}</div>
  <i class="fa fa-arrow-right fa-2x arrow" {{action 'nextMonth'}}></i>
</div>

<br>

<table class="table text-center">
  <thead>
    <tr>
      <th>Members</th>
      <th> Rent </th>
      {{#each currentBills as |bill|}}
        <th> {{bill.concern}} </th>
      {{/each}}
    </tr>
  </thead>
  <tbody>
    {{#each place.users as |user|}}
      <tr class={{if (eq user.email currentEmail) "highlight"}}>
        <td>
          {{user.displayName}}
          {{#if (if-user-is-payer user place.payer)}}
            {{fa-icon 'user'}}
          {{/if}}
        </td>
        <td class="{{user.rent.firstObject.status}}" {{action 'changeStatus' user.rent.firstObject}}> {{user.rent.firstObject.amount}}zł </td>
        {{#each billIds as |billId|}}
          {{prepare-cell bill=(get-proper-bill user.bills billId)
                         change=(action 'changeStatus')}}
        {{/each}}
      </tr>
    {{/each}}
  </tbody>
  <tfoot>
    <tr>
      <td> {{place.users.length}} </td>
      <td> {{place.rent}}zł </td>
      {{#each currentBills as |bill|}}
        <td> {{bill.amount}}zł </td>
      {{/each}}
    </tr>
  </tfoot>
</table>

{{#if isShowingModal}}
  {{#modal-dialog close="toggleModal"
                  translucentOverlay=true}}
    {{bill-form newBill=newBill create=(action 'createBill')}}
  {{/modal-dialog}}
{{/if}}

<div class="text-center"><b> Legend </b></div>
<div class="col-xs-3 col-xs-offset-5">
  <ul>
    <li> {{fa-icon 'user'}} - Payer </li>
    <li> {{fa-icon 'square' class='paid-legend'}} - Paid </li>
    <li> {{fa-icon 'square' class='wait-legend'}} - Not paid </li>
  </ul>
</div>
