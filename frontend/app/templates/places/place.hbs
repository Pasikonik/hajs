{{#if isPayer}}
  {{link-to 'Edit' 'places.place.edit' place class="btn btn-default pull-right"}}
  <button {{action "toggleModal"}} class='btn btn-primary'>Add Billl</button>
  <br>
{{/if}}
<button type="button" class="btn btn-warning pull-right" {{action 'leave'}}>Leave</button>

<br>
<br><br>
<h1 class="text-center"><b>{{place.name}}</b></h1>
<div class="text-center">{{place.address}}</div>
<h2 class="text-center">Month: {{current-month}}</h2>

<table class="table text-center">
  <thead>
    <tr>
        <th>Members</th>
        <th> Czynsz </th>
      {{#each place.bills as |bill|}}
        <th> {{bill.concern}} </th>
      {{/each}}
    </tr>
  </thead>
  <tbody>
    {{#each place.users as |user|}}
      <tr>
        <td>
          {{user.email}}
          {{#if (if-user-is-payer user place.payer)}}
            {{fa-icon 'user'}}
          {{/if}}
        </td>
        <td class="{{user.rent.firstObject.status}}" {{action 'changeStatus' user.rent.firstObject}}> {{user.rent.firstObject.amount}}zł </td>
        {{#each user.bills as |bill|}}
          <td class="{{bill.status}}" {{action 'changeStatus' bill}}> {{bill.amount}}zł </td>
        {{/each}}
      </tr>
    {{/each}}
  </tbody>
  <tfoot>
    <tr>
      <td> {{place.users.length}} </td>
      <td> {{place.rent}}zł </td>
      {{#each place.bills as |bill|}}
        <td> {{bill.amount}}zł </td>
      {{/each}}
    </tr>
  </tfoot>
</table>

{{#if isShowingModal}}
  {{#modal-dialog close="toggleModal"
                  translucentOverlay=true}}
    {{bill-form newBill=newBill create=(action 'createBill')}}
  {{/modal-dialog}}
{{/if}}

<div class="text-center"><b> Legend </b></div>
<div class="col-xs-3 col-xs-offset-5">
  <ul>
    <li> {{fa-icon 'user'}} - Payer </li>
    <li> {{fa-icon 'square' class='paid-legend'}} - Paid </li>
    <li> {{fa-icon 'square' class='wait-legend'}} - Not paid </li>
  </ul>
</div>
